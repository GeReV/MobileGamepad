/*! MobileGamepad 2014-03-24 */
!function(a,b,c,d){var e=c(d),f="function"==typeof define&&define.amd,g="undefined"!=typeof module&&module.exports;f?define(e):g?module.exports=e:b?(this[b]=this[b]||{})[a]=e:this[a]=e}("AnalogStick",void 0,function(a){var b=function(b,c){function d(a){var b=["ms","Moz","webkit","o"],c=document.createElement("div");if(c.style[a])return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(var d=0;d<b.length;++d)if("undefined"!=typeof c.style[b[d]+a])return b[d]+a}function e(){l=[0,0],k=[0,0],i.style[o]=""}function f(){var b,c,d,e;b=a('<div class="stick"/>'),i=b[0],i.style[n]="50% 50% 0",c=(h.width()||j.defaultSize)*j.relativeSize,d=(h.height()||j.defaultSize)*j.relativeSize,b.css({width:c,height:d,left:(h.width()-c)/2,top:(h.height()-d)/2,position:"absolute"}),h.append(b),e=b.offset(),g=[e.left+c/2,e.top+d/2]}var g,h,i,j=this.options=a.extend({},this.defaults,c),k=[0,0],l=[0,0],m=!1,n=d("transformOrigin"),o=d("transform");this.getVector=function(){return k},h=a(b).css("position","relative"),f(),e(),a(document).on("mouseup touchend",function(a){a.preventDefault(),m=!1,e()}).on("mousemove touchmove",function(a){if(a.changedTouches&&(a=a.changedTouches[0]),m){var b=a.pageX-g[0],c=a.pageY-g[1],d=Math.min(Math.sqrt(b*b+c*c),j.movementRadius),e=d/j.movementRadius,f=Math.atan2(c,b);b=Math.cos(f),c=Math.sin(f),l=[b*d,c*d],k=[b*e,-c*e],i.style[o]="rotateX("+-c*e*j.stickAngle+"deg) rotateY("+b*e*j.stickAngle+"deg) translate3d("+l[0]+"px, "+l[1]+"px, 0)"}}),h.on("mousedown touchstart",function(a){a.preventDefault(),m=!0})};return b.prototype={defaults:{defaultSize:100,relativeSize:.8,movementRadius:25,stickAngle:30}},b},window.Zepto||window.jQuery);